(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{84699:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(35828)}])},70137:function(e,t,s){"use strict";s.d(t,{l:function(){return d}});var a=s(11527),n=s(58847),r=s(81690),l=s(45217),i=s(18949),o=s(54295),c=s(70462);function d(e){return(0,a.jsx)(n.D,{className:"p-2 mx-2 prose dark:prose-invert md:prose-lg md:max-w-none text-start rounded-xl",remarkPlugins:[o.Z,c.Z],rehypePlugins:[i.Z],components:{code(e){let{node:t,inline:s,className:n,children:i,...o}=e,c=/language-(\w+)/.exec(n||"");return!s&&c?(0,a.jsx)(r.Z,{...o,style:l.vk,language:c[1],PreTag:"div",children:String(i).replace(/\n$/,"")}):(0,a.jsx)("code",{...o,className:n,children:i})}},children:e.text})}},29423:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return g},Vq:function(){return o},cN:function(){return x},cZ:function(){return f},fK:function(){return m},hg:function(){return c}});var a=s(11527),n=s(50959),r=s(62084),l=s(78944),i=s(29140);let o=r.fC,c=r.xz,d=e=>{let{className:t,children:s,...n}=e;return(0,a.jsx)(r.h_,{className:(0,i.cn)(t),...n,children:(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-start justify-center sm:items-center",children:s})})};d.displayName=r.h_.displayName;let u=n.forwardRef((e,t)=>{let{className:s,children:n,...l}=e;return(0,a.jsx)(r.aV,{className:(0,i.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm transition-all duration-100 data-[state=closed]:animate-out data-[state=open]:fade-in data-[state=closed]:fade-out",s),...l,ref:t})});u.displayName=r.aV.displayName;let f=n.forwardRef((e,t)=>{let{className:s,children:n,...o}=e;return(0,a.jsxs)(d,{children:[(0,a.jsx)(u,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,i.cn)("fixed z-50 grid w-full gap-4 rounded-b-lg bg-white p-6 animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10 sm:max-w-lg sm:rounded-lg sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0","dark:bg-slate-900",s),...o,children:[n,(0,a.jsxs)(r.x8,{className:"absolute top-4 right-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900 dark:data-[state=open]:bg-slate-800",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=r.VY.displayName;let m=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};m.displayName="DialogHeader";let x=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};x.displayName="DialogFooter";let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold text-slate-900","dark:text-slate-50",s),...n})});h.displayName=r.Dx.displayName;let g=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,i.cn)("text-sm text-slate-500","dark:text-slate-400",s),...n})});g.displayName=r.dk.displayName},44624:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var a=s(11527),n=s(50959),r=s(29140);let l=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)("input",{className:(0,r.cn)("flex h-10 w-full rounded-md border border-slate-300 bg-transparent py-2 px-3 text-sm placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 dark:border-slate-700 dark:text-slate-50 dark:focus:ring-slate-400 dark:focus:ring-offset-slate-900",s),ref:t,...n})});l.displayName="Input"},35828:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return p}});var a=s(11527),n=s(3933),r=s(70137),l=s(64271),i=s(29423),o=s(44624),c=s(49300),d=s(4379),u=s(44157),f=s(96131),m=s(87765),x=s.n(m),h=s(73125),g=s(50959);function p(){let e=(0,h.useRouter)(),{toast:t}=(0,d.pm)(),[s,m]=(0,g.useState)(!1),[p,N]=(0,g.useState)(""),[j,w]=(0,g.useState)([]),[k,v]=(0,g.useState)("");(0,g.useEffect)(()=>{y(),s||u.t.OAuthProviders({}).then(e=>{w(e.providers)})},[]);let y=()=>{let e=f.Z.get(n.o3);if(void 0==e){m(!1);return}m(!0)},b=()=>{let s="";u.t.GenerateWechatQRCode({}).then(e=>{s=e.qrcode,v(e.url)}).catch(e=>{console.log("GenerateWechatQRCode error: ",e)});let a=setInterval(()=>{console.log("wechatQRCode: ".concat(s,", wechatQRCodeURL: ").concat(k)),u.t.GenrateToken({qrcode:s}).then(t=>{clearInterval(a),clearTimeout(r),f.Z.set(n.o3,t.token),f.Z.set(n.kk,t.expiry),m(!0),e.push(c.J.links.home)}).catch(e=>{console.log("GenrateToken error: ",e)})},2e3),r=setTimeout(()=>{clearInterval(a),t({variant:"destructive",title:"Sign In error",description:"Sign In with QRCode timeout"})},3e5);return()=>{clearInterval(a),clearTimeout(r)}};if(s)return e.push("/"),(0,a.jsx)("div",{className:"container flex flex-col items-center flex-grow p-8 mx-auto",children:(0,a.jsx)("div",{className:"m-4 prose",children:(0,a.jsx)("h1",{children:"You are already logged in!"})})});let C=s=>{u.t.GenrateToken({magicCode:s}).then(t=>{f.Z.set(n.o3,t.token),f.Z.set(n.kk,t.expiry),m(!0),e.push(c.J.links.home)}).catch(e=>{t({variant:"destructive",title:"Sign In with MagicCode error",description:JSON.stringify(e)})})};return(0,a.jsxs)("div",{className:"container flex flex-col items-center flex-grow p-8 mx-auto",children:[(0,a.jsx)("div",{className:"m-4 prose",children:(0,a.jsx)("h1",{children:"Please Login"})}),(0,a.jsxs)("div",{className:"container flex flex-col items-center max-w-sm mx-auto space-y-2 bg-white",children:[j.map(e=>void 0===e.url?(0,a.jsxs)(l.z,{disabled:!0,children:["Sign In with ",e.name]},e.name):(0,a.jsx)(x(),{href:e.url,className:"w-full",children:(0,a.jsxs)(l.z,{className:"w-full",children:["Sign In with ",e.name]})},e.name)),(0,a.jsxs)(i.Vq,{children:[(0,a.jsx)(i.hg,{onClick:()=>b(),asChild:!0,children:(0,a.jsx)(l.z,{className:"w-full",children:"微信扫码登录"})}),(0,a.jsxs)(i.cZ,{children:[(0,a.jsxs)(i.fK,{children:[(0,a.jsx)(i.$N,{children:"请扫描下方二维码进行登录"}),(0,a.jsx)(i.Be,{children:"需要先关注微信公众号"})]}),(0,a.jsx)("div",{className:"bg-indigo-300",children:(0,a.jsx)("img",{className:"object-cover w-full h-full ",src:k})})]})]}),(0,a.jsxs)(i.Vq,{children:[(0,a.jsx)(i.hg,{onClick:()=>b(),asChild:!0,children:(0,a.jsx)(l.z,{className:"w-full",children:"使用 MagicCode 登录"})}),(0,a.jsxs)(i.cZ,{children:[(0,a.jsxs)(i.fK,{children:[(0,a.jsx)(i.$N,{className:"prose",children:"使用微信或者 Telegram 获取 MagicCode"}),(0,a.jsx)(i.Be,{className:"prose",children:(0,a.jsx)(r.l,{text:"\n微信搜索 **NotionBoy** 关注并回复 `/MagicCode`\n\nTelegram 关注 [**NotionBoy**](https://t.me/TheNotionBoyBot) 并回复 `/MagicCode`\n													"})})]}),(0,a.jsxs)("div",{className:"flex items-center w-full max-w-sm space-x-2",children:[(0,a.jsx)(o.I,{type:"text",placeholder:"Sign In with MagicCode",value:p,onChange:e=>N(e.target.value)}),(0,a.jsx)(l.z,{type:"submit",onClick:()=>C(p),children:"Login"})]})]})]})]})]})}}},function(e){e.O(0,[91,593,84,100,933,774,888,179],function(){return e(e.s=84699)}),_N_E=e.O()}]);
