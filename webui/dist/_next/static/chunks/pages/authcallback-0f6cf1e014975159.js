(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[125],{89263:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/authcallback",function(){return r(49849)}])},49300:function(t,e,r){"use strict";function o(t){return t+".html"}r.d(e,{J:function(){return n}});let n={name:"NotionBoy",description:"NotionBoy is a note app base on Notion. It's a web app, you can use it in your browser.",links:{twitter:"https://twitter.com/LiuVaayne",github:"https://github.com/vaayne/NotionBoy",chatgpt:o("/chat"),login:o("/login"),home:"/",authCallback:o("/authcallback"),price:o("/price"),order:o("/order"),profile:o("/profile")},authPages:[o("/chat"),o("/order"),o("/user")]}},44157:function(t,e,r){"use strict";r.d(e,{t:function(){return u}});let o=Array(64),n=Array(123);for(let t=0;t<64;)n[o[t]=t<26?t+65:t<52?t+71:t<62?t-4:t-59|43]=t++;function s(t,e){return e&&e.constructor===Uint8Array?function(t,e,r){let n=null,s=[],c=0,a=0,i;for(;e<r;){let r=t[e++];switch(a){case 0:s[c++]=o[r>>2],i=(3&r)<<4,a=1;break;case 1:s[c++]=o[i|r>>4],i=(15&r)<<2,a=2;break;case 2:s[c++]=o[i|r>>6],s[c++]=o[63&r],a=0}c>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),c=0)}return(a&&(s[c++]=o[i],s[c++]=61,1===a&&(s[c++]=61)),n)?(c&&n.push(String.fromCharCode.apply(String,s.slice(0,c))),n.join("")):String.fromCharCode.apply(String,s.slice(0,c))}(e,0,e.length):e}function c(t,e){let{pathPrefix:r,...o}=e||{},n=r?"".concat(r).concat(t):t;return fetch(n,o).then(t=>t.json().then(e=>{if(!t.ok)throw e;return e}))}async function a(t,e,r){var o;let{pathPrefix:n,...s}=r||{},c=n?"".concat(n).concat(t):t,a=await fetch(c,s);if(!a.ok){let t=await a.json(),e=t.error&&t.error.message?t.error.message:"";throw Error(e)}if(!a.body)throw Error("response doesnt have a body");await a.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({start(t){t.buf="",t.pos=0},transform(t,e){for(void 0===e.buf&&(e.buf=""),void 0===e.pos&&(e.pos=0),e.buf+=t;e.pos<e.buf.length;)if("\n"===e.buf[e.pos]){let t=e.buf.substring(0,e.pos),r=JSON.parse(t);e.enqueue(r.result),e.buf=e.buf.substring(e.pos+1),e.pos=0}else++e.pos}})).pipeTo((o=t=>{e&&e(t)},new WritableStream({write(t){o(t)}})))}function i(t){return["string","number","boolean"].some(e=>typeof t===e)}function d(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=function t(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object.keys(e).reduce((o,n)=>{let s=e[n],c=r?[r,n].join("."):n,a=Array.isArray(s)&&s.every(t=>i(t))&&s.length>0,d=i(s)&&!(!1===s||0===s||""===s),u={};return!function(t){let e="Object"===Object.prototype.toString.call(t).slice(8,-1);if(!(null!==t&&e)||!e)return!1;let r=Object.getPrototypeOf(t),o="object"==typeof r&&r.constructor===Object.prototype.constructor;return o}(s)?(d||a)&&(u={[c]:s}):u=t(s,c),{...o,...u}},{})}(t),o=Object.keys(r).reduce((t,o)=>{let n=r[o];return e.find(t=>t===o)?t:Array.isArray(n)?[...t,...n.map(t=>[o,t.toString()])]:t=[...t,[o,n.toString()]]},[]);return new URLSearchParams(o).toString()}class u{static Status(t,e){return c("/v1/status?".concat(d(t,[])),{...e,method:"GET"})}static GenrateToken(t,e){return c("/v1/auth/token",{...e,method:"POST",body:JSON.stringify(t,s)})}static OAuthProviders(t,e){return c("/v1/auth/providers?".concat(d(t,[])),{...e,method:"GET"})}static OAuthCallback(t,e){return c("/v1/auth/callback",{...e,method:"POST",body:JSON.stringify(t,s)})}static GenerateApiKey(t,e){return c("/v1/auth/apikey",{...e,method:"POST"})}static DeleteApiKey(t,e){return c("/v1/auth/apikey",{...e,method:"DELETE"})}static GenerateWechatQRCode(t,e){return c("/v1/auth/wechat/qrcode",{...e,method:"POST",body:JSON.stringify(t,s)})}static CreateConversation(t,e){return c("/v1/conversations",{...e,method:"POST",body:JSON.stringify(t,s)})}static UpdateConversation(t,e){return c("/v1/conversations/".concat(t.id),{...e,method:"PUT",body:JSON.stringify(t,s)})}static GetConversation(t,e){return c("/v1/conversations/".concat(t.id,"?").concat(d(t,["id"])),{...e,method:"GET"})}static ListConversations(t,e){return c("/v1/conversations?".concat(d(t,[])),{...e,method:"GET"})}static DeleteConversation(t,e){return c("/v1/conversations/".concat(t.id),{...e,method:"DELETE"})}static CreateMessage(t,e,r){return a("/v1/conversations/".concat(t.conversationId,"/messages"),e,{...r,method:"POST",body:JSON.stringify(t,s)})}static UpdateMessage(t,e,r){return a("/v1/conversations/".concat(t.conversationId,"/messages/").concat(t.id),e,{...r,method:"POST",body:JSON.stringify(t,s)})}static GetMessage(t,e){return c("/v1/conversations/".concat(t.conversationId,"/messages/").concat(t.id,"?").concat(d(t,["conversationId","id"])),{...e,method:"GET"})}static ListMessages(t,e){return c("/v1/conversations/".concat(t.conversationId,"/messages?").concat(d(t,["conversationId"])),{...e,method:"GET"})}static DeleteMessage(t,e){return c("/v1/conversations/".concat(t.conversationId,"/messages/").concat(t.id),{...e,method:"DELETE"})}static CreateOrder(t,e){return c("/v1/orders",{...e,method:"POST",body:JSON.stringify(t,s)})}static GetOrder(t,e){return c("/v1/orders/".concat(t.id,"?").concat(d(t,["id"])),{...e,method:"GET"})}static ListOrders(t,e){return c("/v1/orders?".concat(d(t,[])),{...e,method:"GET"})}static DeleteOrder(t,e){return c("/v1/orders/".concat(t.id),{...e,method:"DELETE"})}static UpdateOrder(t,e){return c("/v1/orders/".concat(t.id),{...e,method:"PATCH",body:JSON.stringify(t,s)})}static PayOrder(t,e){return c("/v1/orders/".concat(t.id,"/pay"),{...e,method:"POST",body:JSON.stringify(t,s)})}static CreateProduct(t,e){return c("/v1/products",{...e,method:"POST",body:JSON.stringify(t,s)})}static GetProduct(t,e){return c("/v1/products/".concat(t.id,"?").concat(d(t,["id"])),{...e,method:"GET"})}static ListProducts(t,e){return c("/v1/products?".concat(d(t,[])),{...e,method:"GET"})}static DeleteProduct(t,e){return c("/v1/products/".concat(t.id),{...e,method:"DELETE"})}static UpdateProduct(t,e){return c("/v1/products/".concat(t.id),{...e,method:"PATCH",body:JSON.stringify(t,s)})}static ListPrompts(t,e){return c("/v1/prompts?".concat(d(t,[])),{...e,method:"GET"})}static GetPrompt(t,e){return c("/v1/prompts/".concat(t.id,"?").concat(d(t,["id"])),{...e,method:"GET"})}static CreatePrompt(t,e){return c("/v1/prompts",{...e,method:"POST",body:JSON.stringify(t,s)})}static UpdatePrompt(t,e){return c("/v1/prompts/".concat(t.id),{...e,method:"PATCH",body:JSON.stringify(t,s)})}static DeletePrompt(t,e){return c("/v1/prompts/".concat(t.id),{...e,method:"DELETE"})}}},49849:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});var o=r(11527),n=r(49300),s=r(44157),c=r(96131),a=r(73125),i=r(50959);function d(){let[t,e]=(0,i.useState)(!1),[r,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(""),p=(0,a.useRouter)();return(0,i.useEffect)(()=>{let t={code:p.query.code,state:p.query.state};if(!p.isReady){d(!0);return}console.log("req is in useEffect ".concat(JSON.stringify(t))),s.t.OAuthCallback(t).then(t=>{console.log("get token: ".concat(t)),t.token&&(c.Z.set("token",t.token,{expires:new Date(t.expiry)}),c.Z.set("tokenExpire",t.expiry,{expires:new Date(t.expiry)})),e(!0),p.push(n.J.links.home),d(!1)}).catch(t=>{console.log("Get token failed",t),h(t.message),d(!1)})},[p]),(0,o.jsx)("div",{className:"container p-8 mx-auto ",children:(0,o.jsxs)("article",{className:"prose-sm prose sm:prose lg:prose-lg xl:prose-2xl",children:[!r&&t&&(0,o.jsx)("h1",{children:"Redirecting..."}),!r&&!t&&(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Login Failed"}),(0,o.jsx)("div",{children:(0,o.jsxs)("p",{className:"text-red-500",children:[(0,o.jsx)("strong",{children:"Error Message:"})," ",u]})})]}),r&&(0,o.jsx)("h1",{children:"Validating..."})]})})}}},function(t){t.O(0,[774,888,179],function(){return t(t.s=89263)}),_N_E=t.O()}]);
